@startuml
[*] --> WaitCard
state WaitCard
state WaitPassword
state WaitTakeCard
state WaitAmount
WaitCard --> WaitPassword : insertCard / 
<requestPassword, user, void>
void
WaitPassword --> WaitTakeCard : enterPassword / 
<verifyAccount, consortium, badAccount>
<badAccountMessage, user, void>
<printReceipt, user, void>
<ejectCard, user, void>
<requestTakeCard, user, void>
void
WaitTakeCard --> WaitCard : takeCard / 
<displayMainScreen, user, void>
void
WaitPassword --> WaitPassword : enterPassword / 
<verifyAccount, consortium, badPassword>
<requestPassword, user, void>
void
WaitPassword --> WaitTakeCard : cancel / 
<canceledMessage, user, void>
<ejectCard, user, void>
<requestTakeCard, user, void>
void
WaitPassword --> WaitAmount : enterPassword / 
<verifyAccount, consortium, OK>
void
@enduml
